<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <link rel="icon" type="image" href="images/icon.png">
    <link rel="stylesheet" href="css/general.css">
    <title>Property Listings</title>
    <style>
        .navbar-nav {
        flex-direction: column;
        align-items: center;
        margin-top: 1rem;
    }

        .nav-item {
        margin-bottom: 10px;
    }
        .nav-link {
            position: relative;
            color: #282828;
            text-decoration: none;
            margin: 3px;
            z-index: 1;
        }

        .centered-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .nav-link.active::after {
            content: "";
            position: absolute;
            bottom: 10px;
            left: 10%;
            width: 80%;
            height: 5px;
            background-color: #02F89C;
            z-index: -1;
        }

        .brand_underline {
            position: relative;
            display: inline-block;
            z-index: 1;
        }

        .brand_underline::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 7px;
            margin-bottom: 8px;
            background-color: #02F89C;
            z-index: -1;
        }

        .pagination {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .pagination li {
            margin: 0 5px;
        }

        .pagination li.disabled span,
        .pagination li.disabled a {
            opacity: 0.5;
            cursor: default;
        }

        .pagination li.active span,
        .pagination li.active a {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;
        }

        .pagination li a,
        .pagination li span {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
    </style>

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <img src="images/staybnb.png" width="150px" class="navbar-brand p-2" href="index.html">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="pagination.html?page=1">Properties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="agents.html">Agents</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link mr-3" href="booking.html">Book a Viewing</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="px-4 py-5 my-5 text-center">
        <h1 class="display-5 fw-bold text-body-emphasis"><span class="brand_underline">Properties</span></h1>
        <div class="col-lg-6 mx-auto">
            <p class="lead mb-4">Discover your dream property with StayBnB. Find homes, apartments, 
                and investment opportunities that match your needs and budget. Our team of experienced professionals 
                is here to guide you through the buying, selling, or renting process. Start your real estate journey 
                today.
            </p>
        </div>
    </div>

    <div class="col-12 mb-3" style="display: flex; justify-content: center; align-items: center; flex-direction: row;">
        <div style="margin: 10px;">
          <label for="priceRange">Price Range:</label>
          <input type="range" id="priceRange" min="0" max="1000000" value="10000000" step="10000">
          <span id="priceRangeLabel"></span>
        </div>
        <div style="margin: 10px;">
          <label for="lotRange">Lot Area:</label>
          <input type="range" id="lotRange" min="0" max="10000" value="0" step="0">
          <span id="lotRangeLabel"></span>
        </div>
      </div>


    <div class="container">
        <div class="pagination-wrapper pt-1 d-flex flex-wrap justify-content-center align-items-center gap-3"
            style="width: 90%; max-width: 1000px; margin: 0 auto;">
            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="pagination-wrapper pt-1 d-flex flex-wrap justify-content-center align-items-center gap-3 mt-5"
            style="width: 90%; max-width: 1000px; margin: 0 auto;">
            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="pagination-wrapper pt-1 d-flex flex-wrap justify-content-center align-items-center gap-3 mt-5"
            style="width: 90%; max-width: 1000px; margin: 0 auto;">
            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>

            <div class="card bg-white shadow-sm rounded-3 overflow-hidden flex-grow-1" style="max-width: 300px;">
                <div class="d-flex flex-column h-100">
                    <ul class="p-4 list-unstyled" style="height: 125px;">
                        <li>Home status:</li>
                        <li>City:</li>
                        <li>Country:</li>
                        <li>Currency:</li>
                        <li>Date price changed: </li>
                    </ul>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-success btn-sm w-100 mt-4">See more</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="centered-container">
            <div class="pagination-container">
                <ul class="pagination pb-4 pt-5">
                    <li class="page-item disabled"><span class="page-link">Previous</span></li>
                    <li class="page-item active"><span class="page-link">1</span></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                    <li class="page-item"><a class="page-link" href="#">6</a></li>
                    <li class="page-item"><a class="page-link" href="#">7</a></li>
                    <li class="page-item"><a class="page-link" href="#">8</a></li>
                    <li class="page-item"><a class="page-link" href="#">Next</a></li>
                </ul>
            </div>
        </div>


    </div>

    <footer class="p-3 mt-5 border-top bg-light">
        <div class="row">
            <div class="col-md-5">
                <img src="images/staybnb.png" width="200" class="ml-5">
            </div>
    
            <div class="col-md-2">
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="index.html" class="nav-link p-0 text-body-secondary"><h5>Home</h5></a></li>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="pagination.html" class="nav-link p-0 text-body-secondary">Properties</a></li>
                    
                </ul>
            </div>
    
            <div class="col-md-2">
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="agents.html" class="nav-link p-0 text-body-secondary"><h5>Agents</h5></a></li>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="privacy.html" class="nav-link p-0 text-body-secondary">Privacy Policy</a></li>
                    <li class="nav-item mb-2"><a href="termsofuse.html" class="nav-link p-0 text-body-secondary">Terms of Use</a></li>
                </ul>
            </div>
    
            <div class="col-md-2">
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="contact.html" class="nav-link p-0 text-body-secondary"><h5>Contact Us</h5></a></li>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><p-0 text-body-secondary>(021) 123-456</a></li>
                    <li class="nav-item mb-2"><p-0 text-body-secondary>hello@staybnb.com</a></li>
                    <li class="nav-item mb-2"><a href="booking.html" class="nav-link p-0 text-body-secondary">Book a Viewing Now!</a></li>
                    
                </ul>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
    <script>
// Variables
document.addEventListener("DOMContentLoaded", function () {
  const cards = document.querySelectorAll(".card");
  const pagination = document.querySelector(".pagination");
  const pageItems = document.querySelectorAll(".page-item");
  const pageLinks = document.querySelectorAll(".page-link");
  const seeMoreButtons = document.querySelectorAll(".btn-success");
  const priceRangeSlider = document.getElementById("priceRange");
  const priceRangeLabel = document.getElementById("priceRangeLabel");
  const lotRangeSlider = document.getElementById("lotRange");
  const lotRangeLabel = document.getElementById("lotRangeLabel");
  let currentPage = 1;

  let storedPage = sessionStorage.getItem("currentPage");
  if (storedPage) {
    currentPage = parseInt(storedPage);
  }

  priceRangeSlider.addEventListener("input", function (event) {
    const minPrice = 0;
    const maxPrice = parseInt(event.target.value);
    priceRangeLabel.textContent = `$${minPrice.toLocaleString()} - $${maxPrice.toLocaleString()}`;
    fetchData(minPrice, maxPrice);
  });
  lotRangeSlider.addEventListener("input", function (event) {
    const minLotArea = 0;
    const maxLotArea = parseInt(event.target.value);
    lotRangeLabel.textContent = `0 - ${maxLotArea.toLocaleString()} sqft`;
    fetchData(undefined, undefined, minLotArea, maxLotArea);
  });

  function compareLotArea(a, b) {
    // sort in descending order of lot area size
    const aLotArea = a.lotAreaValue || 0;
    const bLotArea = b.lotAreaValue || 0;
    return bLotArea - aLotArea;
  }

  function fetchData(minPrice = 0, maxPrice = Infinity, minLotArea = 0, maxLotArea = Infinity) {
    fetch("json/data.json")
      .then((response) => response.json())
      .then((data) => {
        console.log(data);

        let filteredData = data.filter(
          (item) =>
            item.price >= minPrice &&
            item.price <= maxPrice &&
            item.lotAreaValue >= minLotArea &&
            item.lotAreaValue <= maxLotArea
        );
        let sortedData = filteredData.sort(compareLotArea); // Sort data by lot area size

        let startIndex = (currentPage - 1) * cards.length;
        let endIndex = Math.min(startIndex + cards.length, sortedData.length);

        for (let i = 0; i < cards.length; i++) {
          let index = (currentPage - 1) * cards.length + i; // adjust for current page
          if (index < sortedData.length) {
            let item = sortedData[index];
            let listItems = cards[i].querySelectorAll("li");
            let existingImage = cards[i].querySelector("img");
            if (existingImage) {
              cards[i].removeChild(existingImage);
            }
            let image = document.createElement("img");
            image.src = item.imgSrc;
            image.addEventListener("error", function () {
              image.src = "images/placeholder.jpg";
            });
            image.addEventListener("click", function () {
              showModal(item.imgSrc);
            });
            cards[i].prepend(image);
            listItems[0].innerHTML = `<i class="bi bi-house-fill me-2"></i>${item.homeStatus ? item.homeStatus : ""}`;
            listItems[1].innerHTML = `<i class="bi bi-geo-alt-fill me-2"></i>${item.city ? item.city : ""}`;
            listItems[2].innerHTML = `<i class="bi bi-flag-fill me-2"></i>${item.country ? item.country : ""}`;
            let sellingPrice = item.price ? `$${item.price.toLocaleString()}` : "";
            listItems[3].innerHTML = `<i class="bi bi-currency-dollar me-2"></i>Selling Price: ${sellingPrice}`;
            listItems[4].style.display =
              item.lotAreaValue !== undefined &&
              item.lotAreaUnit !== undefined
                ? "list-item"
                : "none";
            if (item.lotAreaValue !== undefined && item.lotAreaUnit !== undefined) {
              let roundedLotArea = parseFloat(item.lotAreaValue.toFixed(2));
              let lotAreaContent = Number.isNaN(roundedLotArea)
                ? ""
                : `${roundedLotArea} ${item.lotAreaUnit}`;
              listItems[4].innerHTML = `<i class="bi bi-bounding-box me-2"></i>Lot Area: ${lotAreaContent}`;
            } else {
              listItems[4].textContent = "";
            }
            seeMoreButtons[i].setAttribute("data-id", item.zpid);
          } else {
            cards[i].style.display = "none";
          }
        }
      })
      .catch((error) => {
        alert(`Error fetching data: ${error}`);
      });
  }

  function updatePagination() {
    for (let i = 0; i < pageItems.length; i++) {
      pageItems[i].classList.remove("active");
      pageItems[i].classList.remove("disabled");
    }
    pageItems[currentPage].classList.add("active");
    if (currentPage === 1) {
      pageItems[0].classList.add("disabled");
    }
    if (currentPage === 5) {
      pageItems[6].classList.add("disabled");
    }
  }

  function handleClick(event, resetPage = false) {
    event.preventDefault();
    let text = event.target.textContent;
    if (text === "Previous") {
      if (currentPage > 1) {
        currentPage--;
      }
    } else if (text === "Next") {
      if (currentPage < 5) {
        currentPage++;
      }
    } else {
      currentPage = parseInt(text);
    }
    sessionStorage.setItem("currentPage", currentPage.toString());
    fetchData();
    updatePagination();
    if (resetPage) {
      sessionStorage.removeItem("currentPage");
    }
  }

  for (let i = 0; i < pageLinks.length; i++) {
    pageLinks[i].addEventListener("click", function (event) {
      handleClick(event, true);
    });
  }

  function redirectToPropertyPage(propertyId) {
    sessionStorage.setItem("currentPage", currentPage.toString());
    window.location.href = `Singlepage.html?zpid=${propertyId}`;
  }

  for (let i = 0; i < seeMoreButtons.length; i++) {
    seeMoreButtons[i].addEventListener("click", function () {
      let propertyId = seeMoreButtons[i].getAttribute("data-id");
      redirectToPropertyPage(propertyId);
    });
  }

  // Check if the current page is set in the URL query parameters
  const urlParams = new URLSearchParams(window.location.search);
  const pageParam = urlParams.get("page");
  if (pageParam) {
    currentPage = parseInt(pageParam);
    sessionStorage.setItem("currentPage", currentPage.toString());
  } else {
    sessionStorage.removeItem("currentPage");
  }

  fetchData();
  updatePagination();
});
    </script>





</body>

</html>